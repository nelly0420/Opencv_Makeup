{% extends "base.html" %}
{% block content %}

<div class="content-container">
    <h1>Stored Products</h1>
    <div id="product-container"></div>
    <div class="clear-button-container">
        <button id="clearQueueBtn" class="btn btn-danger">Clear All</button>
    </div>
</div>

<style>
    /* 메인 컨테이너 스타일 */
    .content-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start; /* 상단 정렬 */
        height: 100vh; /* 전체 화면 높이 설정 */
        width: 100%;
        max-width: 1200px;
        margin: 20px auto; /* 상하 여백을 추가하여 위로 이동 */
        padding: 20px;
        box-sizing: border-box; /* 패딩과 보더를 포함한 전체 크기 계산 */
    }

    /* 제품 컨테이너 스타일 */
    #product-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
        margin-bottom: 20px; /* 버튼과의 간격 추가 */
    }

    /* 각 제품 카드 스타일 */
    .product {
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 10px;
        padding: 15px;
        width: 250px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        text-align: center; /* 중앙 정렬 */
        display: flex;
        flex-direction: column;
        align-items: center; /* 이미지와 텍스트를 중앙에 정렬 */
        transition: transform 0.2s ease-in-out;
    }

    .product:hover {
        transform: translateY(-10px);
    }

    .product img {
        max-width: 100%;
        height: auto;
        border-radius: 10px;
    }

    .product h2 {
        font-size: 20px;
        color: #333;
        margin: 10px 0;
        text-align: center; /* 제목 중앙 정렬 */
    }

    .product p {
        color: #666;
        font-size: 14px;
        margin-bottom: 15px;
        text-align: center; /* 설명 중앙 정렬 */
    }

    /* 색상 버튼 스타일 */
    .color-circle {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        border: 1px solid #ddd;
        margin-top: 10px;
    }

    /* Clear All 버튼을 아래로 이동 */
    .clear-button-container {
        display: flex;
        justify-content: center;
        width: 100%;
    }

    #clearQueueBtn {
        margin-top: 20px;
    }
</style>

<script src="{{ url_for('static', filename='js/jquery-3.6.0.min.js') }}"></script>
<script>
    $(document).ready(function() {
        function loadQueueItems() {
            const myQueue = JSON.parse(localStorage.getItem('queue')) || [];

            let html = '';
            myQueue.forEach(item => {
                html += `
                    <div class="product">
                        <img src="${item.image}" alt="Item Image" />
                        <h2>상품코드: ${item.prdCode}</h2>
                        <p>제품 이름: ${item.name}</p>
                        <button class="color-circle" style="background-color:${item.color};" aria-label="${item.color}"></button>
                    </div>`;
            });
            $('#product-container').html(html);
        }

        loadQueueItems();

        $('#clearQueueBtn').click(function() {
            const delQueue = new Queue(3);
            delQueue.clear();
            alert('큐가 비워졌습니다.');
            window.location.reload();
        });
    });
</script>

{% endblock %}
