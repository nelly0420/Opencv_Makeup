{% extends "base.html" %}
{% block content %}

<div class="container">
    <h1>사진 저장 목록 조회</h1>
    <div id="queueDisplay"></div>
    <button id="clearQueueBtn" class="btn btn-danger">전체 삭제</button>
</div>

<style>
    .item-list {
        list-style-type: none;
        padding: 0;
    }
    .item {
        padding: 20px;
        margin-bottom: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
        background-color: #f8f9fa;
        text-align: center;
    }
    .item img {
        max-width: 150px;
        height: auto;
        margin-top: 10px;
        border-radius: 8px;
    }
</style>

<script src="{{ url_for('static', filename='js/jquery-3.6.0.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/queue.js') }}"></script>
<script>
    $(document).ready(function() {
        function loadQueueItems() {
            const myQueue = JSON.parse(localStorage.getItem('queue')) || [];

            let html = '<ul class="item-list">';
            myQueue.forEach(item => {
                html += `
                    <li class="item">
                        <p><strong>상품코드:</strong> ${item.prdCode}</p>
                        <p><strong>색상정보:</strong> ${item.color}</p>
                        <img src="${item.image}" alt="Item Image" />
                    </li>`;
            });
            html += '</ul>';
            $('#queueDisplay').html(html);
        }

        loadQueueItems();

        $('#clearQueueBtn').click(function() {
            const delQueue = new Queue(3);
            delQueue.clear();
            alert('큐가 비워졌습니다.');
            window.location.reload();
        });
    });
</script>

{% endblock %}
